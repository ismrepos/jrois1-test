os: windows
language: node_js
node_js:
- '10'
env:
  global:
    - MOZ_HEADLESS=1
  secure:
    - "Mr43poiW1s8TCP5mxnQUqUncw5rLpOL+3gfgn6SDtq7EkE4QkiC/2PHagFmckGQ4S/r+avt2QC62LoV3rA0d2OuChJV4T49WDUtmy4gq3Je3+V8rfWnKAVNzb4yXnYd9rRDoZEsqKczqXNA1z3ymv6y/8OafSgstUTEjnYcHJS8WO9wEfGAjWNMnN2jc5czmkHcmb7xMNdscF+9WvGZkbMjPFk6KFjh5sNX5yXe3FHtiYpRXoS2zLOzxEPvzXTmpL11bwpTAtWghOE5lO+wBodrMXv5BXz6Fv/udZq9HsrCUdHZwnBC1d6gVbsTpqvSGI7Srq/RHr6XxQCcwxbrAOV0z/G695lzkOGTyo4sMuL7CQNcpcu2Iwi4VJzA/eg9tSypKFw2/7/XTYtnoV7IxFKMjzV15xQCEGr+IlQulLpfpqYMBEj5L7dagSkjqhJw4KrCot6vsVrqWlQ+DH2vPgeUYuwz0jayqYyylBWbjjHHbBWStMgARicx8HZ2mWDHjEErNZztrGQ99gGhkgyzu4sYfyiElWTyRZSKdlV4fErUsBHpocqq0edTthFuAxFbSjYkD+dMVCfX+EmdOwYXnLBpKIj8pP8NnQH9I8LBgH7ACNO8rYloEgCOzUSxacX25EGRrPcY5QKTNTCnF5daK+TQ28zMH3YRvg2OCM32hcp4="
addons:
  chrome: stable
  firefox: latest
  ssh_known_hosts: $TESTHOST
sudo: required
cache: npm
branches:
  only:
  - master
before_install:
# Windows
- choco install jdk8
- export PATH=$PATH:"C:\Program Files\Java\jdk1.8.0_231\bin"
- java --version
- cd Rois/test/

##- openssl aes-256-cbc -K $encrypted_d2018b1f08ea_key -iv $encrypted_d2018b1f08ea_iv
##  -in deploy_rsa.enc -out /tmp/deploy_rsa -d

install:
- npm install

# Windows
before_script: 
- export PATH=$PATH:".\node_modules\.bin"
- selenium-standalone start &
- sleep 10
script: "wdio wdio_win.conf.js"

#before_deploy:
#- eval "$(ssh-agent -s)" 
#- chmod 600 /tmp/deploy_rsa
#- ssh-add /tmp/deploy_rsa

#deploy:
#  provider: script
#  skip_cleanup: true
#  script: scp -i /tmp/deploy_rsa $TRAVIS_BUILD_DIR/Rois/test/test.txt opc@140.238.39.160:/home/opc/Downloads
#  on:
#    branch: master
